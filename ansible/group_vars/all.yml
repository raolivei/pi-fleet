---
# Network Configuration Variables for Eldertree Cluster
# These variables are used across all playbooks to avoid hardcoding
# Updated: 2026-01-24 - Fixed IP mappings to correct 192.168.2.10x range

# Network Base Configuration
network_base: "192.168.2"
network_gateway: "192.168.2.1"
network_netmask: "255.255.255.0"
network_dns:
  - "192.168.2.1"
  - "8.8.8.8"

# WiFi Network Configuration (192.168.2.0/24)
# Used for external access and management
wifi_ssid: "homebase"
wifi_psk: "homebase.io"

# Node IP Assignments (WiFi - 192.168.2.10x range)
# All nodes are identical HA control-plane servers
node_1_ip: "192.168.2.101"
node_2_ip: "192.168.2.102"
node_3_ip: "192.168.2.103"

# kube-vip Virtual IP (for HA API server access)
kube_vip_ip: "192.168.2.100"

# k3s Configuration
k3s_version: "v1.33.6+k3s1"
k3s_server_url: "https://{{ kube_vip_ip }}:6443"
k3s_cluster_init_node: "node-1"

# Gigabit Network Configuration (10.0.0.0/24 - Isolated Switch)
# Primary network for all k8s and node-to-node communication
gigabit_network_base: "10.0.0"
gigabit_network_netmask: "24"
node_1_eth0_ip: "10.0.0.1"
node_2_eth0_ip: "10.0.0.2"
node_3_eth0_ip: "10.0.0.3"

# k3s should prefer gigabit network for all internal communication
k3s_node_ip_node_1: "{{ node_1_eth0_ip }}"
k3s_node_ip_node_2: "{{ node_2_eth0_ip }}"
k3s_node_ip_node_3: "{{ node_3_eth0_ip }}"

# Flannel interface for CNI (use gigabit)
k3s_flannel_iface: "eth0"

# API server bind address
# IMPORTANT: Must be 0.0.0.0 for kube-vip to work properly
# If set to a specific IP (e.g., 10.0.0.1), the API server only listens
# on that interface and kube-vip VIP (192.168.2.100) cannot reach it
k3s_bind_address: "0.0.0.0"

# Services to disable on all nodes
# Tailscale was causing routing conflicts with k3s CNI
disabled_services:
  - tailscaled

# Backup Configuration
backup_mount_default: "/mnt/backup"
