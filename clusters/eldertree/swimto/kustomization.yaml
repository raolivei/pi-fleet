apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - namespace.yaml
  # Infrastructure secrets (must exist before HelmRelease)
  - ghcr-secret-external.yaml
  - cloudflare-origin-cert-swimto-app-external.yaml
  - cloudflare-origin-cert-eldertree-xyz-external.yaml
  # Infrastructure (kept outside Helm - stateful/sidecar/special)
  - postgres-pvc.yaml
  - postgres-deployment.yaml
  - redis-deployment.yaml
  # Helm-managed app (api, web, services, configmap, ingress, middleware)
  - helmrelease.yaml
  # CronJobs (different pattern from Deployments)
  - cronjob-refresh.yaml
  - facility-url-validator-cronjob.yaml
  # Image automation (stays separate - FluxCD requirement)
  - image-repositories.yaml
  - image-policies.yaml
  - image-update-automation.yaml
  # Vertical Pod Autoscaler (recommendations only)
  - vpa.yaml