apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - deploy.yaml              # Namespace only
  # Infrastructure secrets (must exist before HelmRelease)
  - ghcr-secret-external.yaml
  - basic-auth-external.yaml
  - cloudflare-origin-cert-external.yaml
  # PostgreSQL StatefulSet (kept outside Helm - volumeClaimTemplates)
  - statefulset-postgres.yaml
  # Helm-managed app (api, frontend, redis, ingress, middleware)
  - helmrelease.yaml
  # Image automation (stays separate - FluxCD requirement)
  - image-automation.yaml
