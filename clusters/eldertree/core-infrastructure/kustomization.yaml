apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
# Core infrastructure components - TLS certificate management
# Deploy order: cert-manager first, then issuers
resources:
  - cert-manager # TLS certificate management using cert-manager
  - coredns-autoscaler # Auto-scales CoreDNS for HA (min 2 replicas)
  - issuers # ClusterIssuer resources (self-signed certificates)
  # MetalLB removed - kube-vip now handles LoadBalancer services
  - pod-disruption-budgets # PDBs for critical infrastructure components
  - storage-class-default-patch.yaml # Ensure local-path is NOT default (Longhorn is)
  - storage-class-nvme.yaml # NVMe/SATA storage class for main node (high-performance)
  - storage-class-sd.yaml # SD card storage class for worker nodes
  - traefik-config.yaml # HA Traefik with 2 replicas for graceful node drains
