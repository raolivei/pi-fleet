# Monitoring Stack Values

# Global configuration
global:
  domain: eldertree.local
  clusterIssuer: selfsigned-cluster-issuer

# Prometheus configuration
prometheus:
  enabled: true
  alertmanager:
    enabled: false
  nodeExporter:
    enabled: true
  pushgateway:
    enabled: false
  kubeStateMetrics:
    enabled: true
  server:
    persistentVolume:
      enabled: true
      size: 8Gi
      storageClass: local-path
    ingress:
      enabled: true
      ingressClassName: traefik
      hosts:
        - prometheus.eldertree.local
      tls:
        - secretName: prometheus-tls
          hosts:
            - prometheus.eldertree.local
      annotations:
        cert-manager.io/cluster-issuer: selfsigned-cluster-issuer
    global:
      scrape_interval: 30s
      scrape_timeout: 10s
      evaluation_interval: 30s

# Grafana configuration
grafana:
  enabled: true
  adminPassword: admin
  persistence:
    enabled: true
    size: 2Gi
    storageClassName: local-path
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
        - name: Prometheus
          type: prometheus
          url: http://monitoring-stack-prometheus-server.monitoring.svc.cluster.local
          access: proxy
          isDefault: true
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
        - name: "default"
          orgId: 1
          folder: ""
          type: file
          disableDeletion: false
          editable: true
          options:
            path: /var/lib/grafana/dashboards/default
  dashboards:
    default:
      # Comprehensive Kubernetes cluster monitoring
      k8s-views-global:
        gnetId: 15757
        revision: 37
        datasource: Prometheus
      k8s-views-namespaces:
        gnetId: 15758
        revision: 34
        datasource: Prometheus
      k8s-views-pods:
        gnetId: 15759
        revision: 28
        datasource: Prometheus
      # Detailed cluster metrics
      k8s-cluster-monitoring:
        gnetId: 6417
        revision: 1
        datasource: Prometheus
      # API server health
      k8s-apiserver:
        gnetId: 12006
        revision: 1
        datasource: Prometheus
      # Persistent volumes
      k8s-persistent-volumes:
        gnetId: 13646
        revision: 2
        datasource: Prometheus
      # Node monitoring with enhanced metrics
      node-exporter-full:
        gnetId: 1860
        revision: 37
        datasource: Prometheus
      # Resource usage by namespace
      k8s-compute-resources-namespace:
        gnetId: 15661
        revision: 1
        datasource: Prometheus
      # Resource usage by pod
      k8s-compute-resources-pod:
        gnetId: 15662
        revision: 1
        datasource: Prometheus
  ingress:
    enabled: true
    ingressClassName: traefik
    hosts:
      - grafana.eldertree.local
    tls:
      - secretName: grafana-tls
        hosts:
          - grafana.eldertree.local
    annotations:
      cert-manager.io/cluster-issuer: selfsigned-cluster-issuer
